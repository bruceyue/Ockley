function FindDialog(l){var d=$.extend({getEditor:null,dialogElemSelector:"",findTextSelector:"",foundTextClassName:"",caseSensitiveSelector:""},l);var c={autoOpen:false,resizable:false,title:"Find",buttons:{Previous:h,Next:f},close:e,width:400};var j=$(d.dialogElemSelector).dialog(c);function a(){return j.find(d.findTextSelector).val()}function g(m){j.find(d.findTextSelector).val(m)}function k(){return j.find(d.caseSensitiveSelector).is(":checked")}function b(){var m=null;if(d.getEditor!=null&&$.isFunction(d.getEditor)){m=d.getEditor.apply(this,[]);if(!m.hasOwnProperty("ockley")){m.ockley={}}if(!m.ockley.hasOwnProperty("findState")){m.ockley.findState={cursor:null,query:"",isCaseSensitive:false}}}return m}function i(p){var o=b();if(o!=null){var r=a();var m=k();var q=o.ockley.findState;if(q.cursor==null||q.query!=r||q.isCaseSensitive!=m){q.query=r;q.isCaseSensitive=m;q.cursor=o.getSearchCursor(r,null,!m)}var n=false;if(p){n=q.cursor.findPrevious()}else{n=q.cursor.findNext()}if(n){o.markText(q.cursor.from(),q.cursor.to(),d.foundTextClassName);o.setCursor(q.cursor.from())}}}function h(){log("find prev");i(true)}function f(){log("find next");i(false)}function e(n,o){var m=b();if(m){$(m.getWrapperElement()).find("."+d.foundTextClassName).removeClass(d.foundTextClassName)}}this.show=function(m){g(m);j.dialog("open");return this};this.hide=function(){j.dialog("close");return this}};